<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Tarefas</title>
  
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="tarefa.css" />
</head>
<body class="">
   <div class="sidebar">
    <div class="text-center mb-4">
      <img src="/docs/image/logoEscolaColoridosem.png" alt="Logo Escola" class="logo">
      <h6>Jardim Encantado</h6>
    </div>
    <a href="paginainicial.html">P√°gina Inicial</a>
    <a href="portal_secretaria.html">Portal Secretaria</a>
    <a href="frequencia.html">Frequ√™ncia</a>
    <a href="notas.html">Notas</a>
    <a href="turmas.html">Turmas</a>
    <a href="noticias.html">Not√≠cias</a>
    <a href="calendario.html">Calend√°rio</a>
    <a href="grade.html">Grade</a>
    <a href="tarefas.html"class="fw-bold">Tarefas</a>
  </div>
  <style>
    body { background:#f3f4f7; padding-top:40px; }
    .task-card { border-left:6px solid #0d6efd; border-radius:10px; padding:15px; background:white; box-shadow:0 2px 6px rgba(0,0,0,.08); }
    .task-today { border-left-color:#ffc107 !important; background:#fff9e6; }
    .task-text { flex:1; font-size:1.05rem; cursor:text; }
    .task-done .task-text { text-decoration:line-through; opacity:.6; }
    .icon-btn { background:none; border:none; padding:4px; font-size:1.1rem; opacity:.7; }
    .icon-btn:hover { opacity:1; }
    .date-label { font-size:.85rem; color:#555; }
  </style>
</head>
<body>
<div class="container">
  <div class="row justify-content-center">
    <div class="col-md-7 col-lg-6">
      <div class="card shadow-sm mb-4">
        <div class="card-body">
          <h3 class="mb-3">Tarefas </h3>

          <form id="taskForm" autocomplete="off" class="mb-3">
            <div class="input-group mb-2">
              <input id="taskInput" class="form-control" placeholder="Digite sua tarefa" required>
            </div>
            <div class="input-group mb-2">
              <input id="taskDate" type="date" class="form-control" required>
            </div>
            <button class="btn btn-primary w-100">Adicionar</button>
          </form>

          <ul id="tasksList" class="list-group list-group-flush"></ul>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
const STORAGE = 'tarefas_dia_v1';
let tasks = [];

function load() {
  tasks = JSON.parse(localStorage.getItem(STORAGE) || '[]');
}
function save() {
  localStorage.setItem(STORAGE, JSON.stringify(tasks));
}

function isToday(dateStr) {
  const today = new Date().toISOString().split('T')[0];
  return dateStr === today;
}

function render() {
  const ul = document.getElementById('tasksList');
  ul.innerHTML = '';

  tasks.forEach(t => {
    const li = document.createElement('li');
    li.className = 'list-group-item';

    const card = document.createElement('div');
    card.className = 'task-card d-flex align-items-start gap-2';
    if (isToday(t.date)) card.classList.add('task-today');
    if (t.done) card.classList.add('task-done');

    const check = document.createElement('input');
    check.type = 'checkbox';
    check.checked = t.done;
    check.addEventListener('change', () => {
      t.done = check.checked;
      save(); render();
    });

    const text = document.createElement('span');
    text.className = 'task-text';
    text.contentEditable = true;
    text.innerText = t.text;
    text.addEventListener('blur', () => {
      t.text = text.innerText.trim();
      save();
    });

    const date = document.createElement('div');
    date.className = 'date-label';
    date.innerText = new Date(t.date).toLocaleDateString('pt-BR');

    const del = document.createElement('button');
    del.className = 'icon-btn';
    del.innerHTML = 'üóëÔ∏è';
    del.addEventListener('click', () => {
      tasks = tasks.filter(x => x.id !== t.id);
      save(); render();
    });

    card.appendChild(check);

    const group = document.createElement('div');
    group.className = 'd-flex flex-column flex-grow-1';
    group.appendChild(text);
    group.appendChild(date);

    card.appendChild(group);
    card.appendChild(del);
    li.appendChild(card);
    ul.appendChild(li);
  });
}

document.getElementById('taskForm').addEventListener('submit', e => {
  e.preventDefault();
  const input = document.getElementById('taskInput');
  const date = document.getElementById('taskDate');

  tasks.push({ id: Date.now(), text: input.value.trim(), date: date.value, done:false });
  save(); render();
  input.value = '';
});

load();
render();
</script>
</body>
</html>
